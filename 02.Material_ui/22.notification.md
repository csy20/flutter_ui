# Notifications in Flutter Material UI

## What are Notifications?

**Notifications** are alerts that inform users about important events, updates, or messages in your app. Flutter provides several types of notification systems: in-app notifications (like banners and overlays), system notifications (push notifications), and local notifications. Each serves different purposes and user interaction patterns.

## Types of Notifications

### 1. In-App Notifications
- **Banner Notifications**: Top-sliding banners within the app
- **Overlay Notifications**: Custom overlay widgets
- **Dialog Notifications**: Modal notifications requiring user action
- **Toast-like Notifications**: Similar to SnackBar but more customizable

### 2. System Notifications
- **Local Notifications**: Scheduled notifications from the app
- **Push Notifications**: Remote notifications from servers
- **Foreground Notifications**: Shown when app is active
- **Background Notifications**: Shown when app is inactive

## Key Features

- **Customizable Appearance**: Colors, icons, animations, and layouts
- **Action Support**: Interactive buttons and user responses
- **Scheduling**: Time-based and event-based triggers
- **Persistence**: Temporary or persistent display options
- **Rich Content**: Images, progress bars, and custom layouts
- **Sound and Vibration**: Audio and haptic feedback
- **Accessibility**: Screen reader and assistive technology support

## In-App Notification Implementation

### Custom Notification Banner

```dart
import 'package:flutter/material.dart';

class NotificationBanner extends StatefulWidget {
  final String title;
  final String message;
  final IconData? icon;
  final Color? backgroundColor;
  final Color? textColor;
  final Duration duration;
  final VoidCallback? onTap;
  final VoidCallback? onDismiss;
  final bool showCloseButton;

  const NotificationBanner({
    Key? key,
    required this.title,
    required this.message,
    this.icon,
    this.backgroundColor,
    this.textColor,
    this.duration = const Duration(seconds: 4),
    this.onTap,
    this.onDismiss,
    this.showCloseButton = true,
  }) : super(key: key);

  @override
  _NotificationBannerState createState() => _NotificationBannerState();
}

class _NotificationBannerState extends State<NotificationBanner>
    with SingleTickerProviderStateMixin {
  late AnimationController _animationController;
  late Animation<double> _slideAnimation;
  late Animation<double> _fadeAnimation;

  @override
  void initState() {
    super.initState();
    _animationController = AnimationController(
      duration: Duration(milliseconds: 300),
      vsync: this,
    );

    _slideAnimation = Tween<double>(
      begin: -1.0,
      end: 0.0,
    ).animate(CurvedAnimation(
      parent: _animationController,
      curve: Curves.easeOut,
    ));

    _fadeAnimation = Tween<double>(
      begin: 0.0,
      end: 1.0,
    ).animate(CurvedAnimation(
      parent: _animationController,
      curve: Curves.easeIn,
    ));

    _animationController.forward();

    // Auto dismiss
    Future.delayed(widget.duration, () {
      if (mounted) {
        _dismiss();
      }
    });
  }

  void _dismiss() {
    _animationController.reverse().then((_) {
      if (widget.onDismiss != null) {
        widget.onDismiss!();
      }
    });
  }

  @override
  Widget build(BuildContext context) {
    return AnimatedBuilder(
      animation: _animationController,
      builder: (context, child) {
        return Transform.translate(
          offset: Offset(0, _slideAnimation.value * 100),
          child: Opacity(
            opacity: _fadeAnimation.value,
            child: Material(
              elevation: 8,
              child: Container(
                width: double.infinity,
                padding: EdgeInsets.all(16),
                decoration: BoxDecoration(
                  color: widget.backgroundColor ?? Colors.blue[700],
                  boxShadow: [
                    BoxShadow(
                      color: Colors.black26,
                      blurRadius: 8,
                      offset: Offset(0, 2),
                    ),
                  ],
                ),
                child: SafeArea(
                  child: Row(
                    children: [
                      if (widget.icon != null) ...[
                        Icon(
                          widget.icon,
                          color: widget.textColor ?? Colors.white,
                          size: 24,
                        ),
                        SizedBox(width: 12),
                      ],
                      Expanded(
                        child: GestureDetector(
                          onTap: widget.onTap,
                          child: Column(
                            crossAxisAlignment: CrossAxisAlignment.start,
                            mainAxisSize: MainAxisSize.min,
                            children: [
                              Text(
                                widget.title,
                                style: TextStyle(
                                  color: widget.textColor ?? Colors.white,
                                  fontSize: 16,
                                  fontWeight: FontWeight.bold,
                                ),
                              ),
                              SizedBox(height: 4),
                              Text(
                                widget.message,
                                style: TextStyle(
                                  color: (widget.textColor ?? Colors.white).withOpacity(0.9),
                                  fontSize: 14,
                                ),
                              ),
                            ],
                          ),
                        ),
                      ),
                      if (widget.showCloseButton)
                        IconButton(
                          icon: Icon(
                            Icons.close,
                            color: widget.textColor ?? Colors.white,
                          ),
                          onPressed: _dismiss,
                        ),
                    ],
                  ),
                ),
              ),
            ),
          ),
        );
      },
    );
  }

  @override
  void dispose() {
    _animationController.dispose();
    super.dispose();
  }
}

// Notification Service for managing in-app notifications
class NotificationService {
  static OverlayEntry? _currentNotification;

  static void showBanner(
    BuildContext context, {
    required String title,
    required String message,
    IconData? icon,
    Color? backgroundColor,
    Color? textColor,
    Duration duration = const Duration(seconds: 4),
    VoidCallback? onTap,
  }) {
    // Remove existing notification
    hideCurrent();

    _currentNotification = OverlayEntry(
      builder: (context) => Positioned(
        top: 0,
        left: 0,
        right: 0,
        child: NotificationBanner(
          title: title,
          message: message,
          icon: icon,
          backgroundColor: backgroundColor,
          textColor: textColor,
          duration: duration,
          onTap: onTap,
          onDismiss: () {
            hideCurrent();
          },
        ),
      ),
    );

    Overlay.of(context)?.insert(_currentNotification!);
  }

  static void hideCurrent() {
    _currentNotification?.remove();
    _currentNotification = null;
  }
}

// Basic notification examples
class BasicNotificationExample extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text('Basic Notifications'),
        backgroundColor: Colors.blue,
      ),
      body: Padding(
        padding: EdgeInsets.all(16.0),
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.stretch,
          children: [
            Text(
              'In-App Notification Examples',
              style: TextStyle(fontSize: 24, fontWeight: FontWeight.bold),
            ),
            SizedBox(height: 20),
            
            // Success Notification
            ElevatedButton(
              onPressed: () {
                NotificationService.showBanner(
                  context,
                  title: 'Success!',
                  message: 'Your changes have been saved successfully.',
                  icon: Icons.check_circle,
                  backgroundColor: Colors.green[700],
                  onTap: () {
                    print('Success notification tapped');
                  },
                );
              },
              child: Text('Show Success Notification'),
              style: ElevatedButton.styleFrom(backgroundColor: Colors.green),
            ),
            
            SizedBox(height: 10),
            
            // Error Notification
            ElevatedButton(
              onPressed: () {
                NotificationService.showBanner(
                  context,
                  title: 'Error',
                  message: 'Failed to connect to server. Please check your internet connection.',
                  icon: Icons.error,
                  backgroundColor: Colors.red[700],
                  duration: Duration(seconds: 6),
                  onTap: () {
                    print('Error notification tapped');
                  },
                );
              },
              child: Text('Show Error Notification'),
              style: ElevatedButton.styleFrom(backgroundColor: Colors.red),
            ),
            
            SizedBox(height: 10),
            
            // Warning Notification
            ElevatedButton(
              onPressed: () {
                NotificationService.showBanner(
                  context,
                  title: 'Warning',
                  message: 'Low storage space. Please free up some space.',
                  icon: Icons.warning,
                  backgroundColor: Colors.orange[700],
                  onTap: () {
                    print('Warning notification tapped');
                  },
                );
              },
              child: Text('Show Warning Notification'),
              style: ElevatedButton.styleFrom(backgroundColor: Colors.orange),
            ),
            
            SizedBox(height: 10),
            
            // Info Notification
            ElevatedButton(
              onPressed: () {
                NotificationService.showBanner(
                  context,
                  title: 'New Feature',
                  message: 'Check out our new dark mode theme in settings!',
                  icon: Icons.info,
                  backgroundColor: Colors.blue[700],
                  onTap: () {
                    print('Info notification tapped');
                  },
                );
              },
              child: Text('Show Info Notification'),
              style: ElevatedButton.styleFrom(backgroundColor: Colors.blue),
            ),
            
            SizedBox(height: 10),
            
            // Custom Notification
            ElevatedButton(
              onPressed: () {
                NotificationService.showBanner(
                  context,
                  title: 'Message Received',
                  message: 'You have a new message from John Doe.',
                  icon: Icons.message,
                  backgroundColor: Colors.purple[700],
                  duration: Duration(seconds: 5),
                  onTap: () {
                    print('Message notification tapped');
                  },
                );
              },
              child: Text('Show Message Notification'),
              style: ElevatedButton.styleFrom(backgroundColor: Colors.purple),
            ),
            
            SizedBox(height: 20),
            
            ElevatedButton(
              onPressed: () {
                NotificationService.hideCurrent();
              },
              child: Text('Hide Current Notification'),
              style: ElevatedButton.styleFrom(backgroundColor: Colors.grey),
            ),
          ],
        ),
      ),
    );
  }
}
```

## Advanced In-App Notifications

### Custom Notification Widget with Actions

```dart
class AdvancedNotification extends StatefulWidget {
  final String title;
  final String message;
  final String? subtitle;
  final Widget? leadingWidget;
  final List<NotificationAction>? actions;
  final Color? backgroundColor;
  final Duration duration;
  final VoidCallback? onDismiss;
  final bool isDismissible;
  final NotificationPosition position;

  const AdvancedNotification({
    Key? key,
    required this.title,
    required this.message,
    this.subtitle,
    this.leadingWidget,
    this.actions,
    this.backgroundColor,
    this.duration = const Duration(seconds: 5),
    this.onDismiss,
    this.isDismissible = true,
    this.position = NotificationPosition.top,
  }) : super(key: key);

  @override
  _AdvancedNotificationState createState() => _AdvancedNotificationState();
}

enum NotificationPosition { top, bottom, center }

class NotificationAction {
  final String label;
  final VoidCallback onPressed;
  final Color? textColor;
  final Color? backgroundColor;

  NotificationAction({
    required this.label,
    required this.onPressed,
    this.textColor,
    this.backgroundColor,
  });
}

class _AdvancedNotificationState extends State<AdvancedNotification>
    with TickerProviderStateMixin {
  late AnimationController _slideController;
  late AnimationController _fadeController;
  late Animation<Offset> _slideAnimation;
  late Animation<double> _fadeAnimation;

  @override
  void initState() {
    super.initState();
    
    _slideController = AnimationController(
      duration: Duration(milliseconds: 400),
      vsync: this,
    );
    
    _fadeController = AnimationController(
      duration: Duration(milliseconds: 300),
      vsync: this,
    );

    // Configure animations based on position
    Offset beginOffset;
    switch (widget.position) {
      case NotificationPosition.top:
        beginOffset = Offset(0, -1);
        break;
      case NotificationPosition.bottom:
        beginOffset = Offset(0, 1);
        break;
      case NotificationPosition.center:
        beginOffset = Offset(0, 0);
        break;
    }

    _slideAnimation = Tween<Offset>(
      begin: beginOffset,
      end: Offset.zero,
    ).animate(CurvedAnimation(
      parent: _slideController,
      curve: Curves.elasticOut,
    ));

    _fadeAnimation = Tween<double>(
      begin: 0.0,
      end: 1.0,
    ).animate(CurvedAnimation(
      parent: _fadeController,
      curve: Curves.easeIn,
    ));

    _slideController.forward();
    _fadeController.forward();

    // Auto dismiss
    if (widget.duration != Duration.zero) {
      Future.delayed(widget.duration, () {
        if (mounted) {
          _dismiss();
        }
      });
    }
  }

  void _dismiss() {
    _slideController.reverse();
    _fadeController.reverse().then((_) {
      if (widget.onDismiss != null) {
        widget.onDismiss!();
      }
    });
  }

  @override
  Widget build(BuildContext context) {
    return AnimatedBuilder(
      animation: Listenable.merge([_slideController, _fadeController]),
      builder: (context, child) {
        return SlideTransition(
          position: _slideAnimation,
          child: FadeTransition(
            opacity: _fadeAnimation,
            child: Container(
              margin: EdgeInsets.all(16),
              decoration: BoxDecoration(
                color: widget.backgroundColor ?? Colors.white,
                borderRadius: BorderRadius.circular(12),
                boxShadow: [
                  BoxShadow(
                    color: Colors.black26,
                    blurRadius: 10,
                    offset: Offset(0, 4),
                  ),
                ],
              ),
              child: Material(
                color: Colors.transparent,
                child: Padding(
                  padding: EdgeInsets.all(16),
                  child: Column(
                    mainAxisSize: MainAxisSize.min,
                    crossAxisAlignment: CrossAxisAlignment.start,
                    children: [
                      Row(
                        crossAxisAlignment: CrossAxisAlignment.start,
                        children: [
                          if (widget.leadingWidget != null) ...[
                            widget.leadingWidget!,
                            SizedBox(width: 12),
                          ],
                          Expanded(
                            child: Column(
                              crossAxisAlignment: CrossAxisAlignment.start,
                              children: [
                                Text(
                                  widget.title,
                                  style: TextStyle(
                                    fontSize: 16,
                                    fontWeight: FontWeight.bold,
                                    color: Colors.black87,
                                  ),
                                ),
                                if (widget.subtitle != null) ...[
                                  SizedBox(height: 2),
                                  Text(
                                    widget.subtitle!,
                                    style: TextStyle(
                                      fontSize: 12,
                                      color: Colors.grey[600],
                                    ),
                                  ),
                                ],
                                SizedBox(height: 4),
                                Text(
                                  widget.message,
                                  style: TextStyle(
                                    fontSize: 14,
                                    color: Colors.black87,
                                  ),
                                ),
                              ],
                            ),
                          ),
                          if (widget.isDismissible)
                            IconButton(
                              icon: Icon(Icons.close, size: 20),
                              onPressed: _dismiss,
                              padding: EdgeInsets.zero,
                              constraints: BoxConstraints(),
                            ),
                        ],
                      ),
                      if (widget.actions != null && widget.actions!.isNotEmpty) ...[
                        SizedBox(height: 12),
                        Row(
                          mainAxisAlignment: MainAxisAlignment.end,
                          children: widget.actions!.map((action) {
                            return Padding(
                              padding: EdgeInsets.only(left: 8),
                              child: TextButton(
                                onPressed: () {
                                  action.onPressed();
                                  _dismiss();
                                },
                                child: Text(
                                  action.label,
                                  style: TextStyle(color: action.textColor),
                                ),
                                style: TextButton.styleFrom(
                                  backgroundColor: action.backgroundColor,
                                ),
                              ),
                            );
                          }).toList(),
                        ),
                      ],
                    ],
                  ),
                ),
              ),
            ),
          ),
        );
      },
    );
  }

  @override
  void dispose() {
    _slideController.dispose();
    _fadeController.dispose();
    super.dispose();
  }
}

// Advanced Notification Service
class AdvancedNotificationService {
  static OverlayEntry? _currentNotification;

  static void show(
    BuildContext context, {
    required String title,
    required String message,
    String? subtitle,
    Widget? leadingWidget,
    List<NotificationAction>? actions,
    Color? backgroundColor,
    Duration duration = const Duration(seconds: 5),
    NotificationPosition position = NotificationPosition.top,
  }) {
    hideCurrent();

    _currentNotification = OverlayEntry(
      builder: (context) => Positioned(
        top: position == NotificationPosition.top ? 0 : null,
        bottom: position == NotificationPosition.bottom ? 0 : null,
        left: 0,
        right: 0,
        child: position == NotificationPosition.center
            ? Center(
                child: AdvancedNotification(
                  title: title,
                  message: message,
                  subtitle: subtitle,
                  leadingWidget: leadingWidget,
                  actions: actions,
                  backgroundColor: backgroundColor,
                  duration: duration,
                  position: position,
                  onDismiss: hideCurrent,
                ),
              )
            : SafeArea(
                child: AdvancedNotification(
                  title: title,
                  message: message,
                  subtitle: subtitle,
                  leadingWidget: leadingWidget,
                  actions: actions,
                  backgroundColor: backgroundColor,
                  duration: duration,
                  position: position,
                  onDismiss: hideCurrent,
                ),
              ),
      ),
    );

    Overlay.of(context)?.insert(_currentNotification!);
  }

  static void hideCurrent() {
    _currentNotification?.remove();
    _currentNotification = null;
  }
}

// Advanced notification examples
class AdvancedNotificationExample extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text('Advanced Notifications'),
        backgroundColor: Colors.indigo,
      ),
      body: Padding(
        padding: EdgeInsets.all(16.0),
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.stretch,
          children: [
            Text(
              'Advanced Notification Features',
              style: TextStyle(fontSize: 24, fontWeight: FontWeight.bold),
            ),
            SizedBox(height: 20),
            
            // Notification with actions
            ElevatedButton(
              onPressed: () {
                AdvancedNotificationService.show(
                  context,
                  title: 'New Message',
                  message: 'You have received a new message from Sarah.',
                  subtitle: '2 minutes ago',
                  leadingWidget: CircleAvatar(
                    backgroundImage: NetworkImage('https://via.placeholder.com/40'),
                    radius: 20,
                  ),
                  actions: [
                    NotificationAction(
                      label: 'REPLY',
                      onPressed: () {
                        print('Reply action pressed');
                      },
                      textColor: Colors.blue,
                    ),
                    NotificationAction(
                      label: 'MARK READ',
                      onPressed: () {
                        print('Mark read action pressed');
                      },
                      textColor: Colors.grey[600],
                    ),
                  ],
                );
              },
              child: Text('Show Message Notification'),
            ),
            
            SizedBox(height: 10),
            
            // Download notification
            ElevatedButton(
              onPressed: () {
                AdvancedNotificationService.show(
                  context,
                  title: 'Download Complete',
                  message: 'presentation.pdf has been downloaded successfully.',
                  leadingWidget: Container(
                    width: 40,
                    height: 40,
                    decoration: BoxDecoration(
                      color: Colors.green[100],
                      borderRadius: BorderRadius.circular(20),
                    ),
                    child: Icon(Icons.download_done, color: Colors.green),
                  ),
                  actions: [
                    NotificationAction(
                      label: 'OPEN',
                      onPressed: () {
                        print('Open file action pressed');
                      },
                      textColor: Colors.blue,
                    ),
                    NotificationAction(
                      label: 'LOCATE',
                      onPressed: () {
                        print('Locate file action pressed');
                      },
                      textColor: Colors.grey[600],
                    ),
                  ],
                  backgroundColor: Colors.green[50],
                );
              },
              child: Text('Show Download Notification'),
            ),
            
            SizedBox(height: 10),
            
            // Update notification
            ElevatedButton(
              onPressed: () {
                AdvancedNotificationService.show(
                  context,
                  title: 'App Update Available',
                  message: 'Version 2.1.0 is now available with new features and bug fixes.',
                  leadingWidget: Container(
                    width: 40,
                    height: 40,
                    decoration: BoxDecoration(
                      color: Colors.blue[100],
                      borderRadius: BorderRadius.circular(20),
                    ),
                    child: Icon(Icons.system_update, color: Colors.blue),
                  ),
                  actions: [
                    NotificationAction(
                      label: 'UPDATE',
                      onPressed: () {
                        print('Update action pressed');
                      },
                      textColor: Colors.white,
                      backgroundColor: Colors.blue,
                    ),
                    NotificationAction(
                      label: 'LATER',
                      onPressed: () {
                        print('Later action pressed');
                      },
                      textColor: Colors.grey[600],
                    ),
                  ],
                  duration: Duration(seconds: 8),
                );
              },
              child: Text('Show Update Notification'),
            ),
            
            SizedBox(height: 10),
            
            // Bottom notification
            ElevatedButton(
              onPressed: () {
                AdvancedNotificationService.show(
                  context,
                  title: 'Connection Restored',
                  message: 'Your internet connection has been restored.',
                  leadingWidget: Icon(Icons.wifi, color: Colors.green, size: 40),
                  position: NotificationPosition.bottom,
                  backgroundColor: Colors.green[50],
                );
              },
              child: Text('Show Bottom Notification'),
            ),
            
            SizedBox(height: 10),
            
            // Center notification
            ElevatedButton(
              onPressed: () {
                AdvancedNotificationService.show(
                  context,
                  title: 'Achievement Unlocked!',
                  message: 'You have completed your first project.',
                  leadingWidget: Container(
                    width: 40,
                    height: 40,
                    decoration: BoxDecoration(
                      color: Colors.amber[100],
                      borderRadius: BorderRadius.circular(20),
                    ),
                    child: Icon(Icons.emoji_events, color: Colors.amber),
                  ),
                  position: NotificationPosition.center,
                  backgroundColor: Colors.amber[50],
                  duration: Duration(seconds: 6),
                );
              },
              child: Text('Show Center Notification'),
            ),
          ],
        ),
      ),
    );
  }
}
```

## Local Notifications Setup

### Adding Local Notifications Plugin

First, add the dependency to your `pubspec.yaml`:

```yaml
dependencies:
  flutter_local_notifications: ^16.3.0
  timezone: ^0.9.2
```

### Local Notifications Implementation

```dart
import 'package:flutter_local_notifications/flutter_local_notifications.dart';
import 'package:timezone/timezone.dart' as tz;
import 'package:timezone/data/latest.dart' as tz;

class LocalNotificationService {
  static final FlutterLocalNotificationsPlugin _notificationsPlugin =
      FlutterLocalNotificationsPlugin();

  static Future<void> initialize() async {
    // Initialize timezone data
    tz.initializeTimeZones();

    const AndroidInitializationSettings initializationSettingsAndroid =
        AndroidInitializationSettings('@mipmap/ic_launcher');

    const DarwinInitializationSettings initializationSettingsIOS =
        DarwinInitializationSettings(
      requestAlertPermission: true,
      requestBadgePermission: true,
      requestSoundPermission: true,
    );

    const InitializationSettings initializationSettings =
        InitializationSettings(
      android: initializationSettingsAndroid,
      iOS: initializationSettingsIOS,
    );

    await _notificationsPlugin.initialize(
      initializationSettings,
      onDidReceiveNotificationResponse: _onNotificationTapped,
    );
  }

  static Future<void> requestPermissions() async {
    final AndroidFlutterLocalNotificationsPlugin? androidImplementation =
        _notificationsPlugin.resolvePlatformSpecificImplementation<
            AndroidFlutterLocalNotificationsPlugin>();

    final DarwinFlutterLocalNotificationsPlugin? iosImplementation =
        _notificationsPlugin.resolvePlatformSpecificImplementation<
            DarwinFlutterLocalNotificationsPlugin>();

    if (androidImplementation != null) {
      await androidImplementation.requestExactAlarmsPermission();
      await androidImplementation.requestNotificationsPermission();
    }

    if (iosImplementation != null) {
      await iosImplementation.requestPermissions(
        alert: true,
        badge: true,
        sound: true,
      );
    }
  }

  static void _onNotificationTapped(NotificationResponse response) {
    print('Notification tapped: ${response.payload}');
    // Handle notification tap
  }

  // Show immediate notification
  static Future<void> showNotification({
    required int id,
    required String title,
    required String body,
    String? payload,
  }) async {
    const AndroidNotificationDetails androidPlatformChannelSpecifics =
        AndroidNotificationDetails(
      'default_channel',
      'Default Channel',
      channelDescription: 'Default notification channel',
      importance: Importance.high,
      priority: Priority.high,
      showWhen: true,
    );

    const DarwinNotificationDetails iosPlatformChannelSpecifics =
        DarwinNotificationDetails(
      presentAlert: true,
      presentBadge: true,
      presentSound: true,
    );

    const NotificationDetails platformChannelSpecifics = NotificationDetails(
      android: androidPlatformChannelSpecifics,
      iOS: iosPlatformChannelSpecifics,
    );

    await _notificationsPlugin.show(
      id,
      title,
      body,
      platformChannelSpecifics,
      payload: payload,
    );
  }

  // Schedule notification
  static Future<void> scheduleNotification({
    required int id,
    required String title,
    required String body,
    required DateTime scheduledDate,
    String? payload,
  }) async {
    const AndroidNotificationDetails androidPlatformChannelSpecifics =
        AndroidNotificationDetails(
      'scheduled_channel',
      'Scheduled Channel',
      channelDescription: 'Scheduled notification channel',
      importance: Importance.high,
      priority: Priority.high,
    );

    const DarwinNotificationDetails iosPlatformChannelSpecifics =
        DarwinNotificationDetails();

    const NotificationDetails platformChannelSpecifics = NotificationDetails(
      android: androidPlatformChannelSpecifics,
      iOS: iosPlatformChannelSpecifics,
    );

    await _notificationsPlugin.zonedSchedule(
      id,
      title,
      body,
      tz.TZDateTime.from(scheduledDate, tz.local),
      platformChannelSpecifics,
      androidScheduleMode: AndroidScheduleMode.exactAllowWhileIdle,
      uiLocalNotificationDateInterpretation:
          UILocalNotificationDateInterpretation.absoluteTime,
      payload: payload,
    );
  }

  // Show notification with actions
  static Future<void> showNotificationWithActions({
    required int id,
    required String title,
    required String body,
    String? payload,
  }) async {
    const AndroidNotificationDetails androidPlatformChannelSpecifics =
        AndroidNotificationDetails(
      'actions_channel',
      'Actions Channel',
      channelDescription: 'Notification channel with actions',
      importance: Importance.high,
      priority: Priority.high,
      actions: <AndroidNotificationAction>[
        AndroidNotificationAction(
          'reply',
          'Reply',
          showsUserInterface: true,
        ),
        AndroidNotificationAction(
          'mark_read',
          'Mark as Read',
        ),
      ],
    );

    const DarwinNotificationDetails iosPlatformChannelSpecifics =
        DarwinNotificationDetails(
      categoryIdentifier: 'message_category',
    );

    const NotificationDetails platformChannelSpecifics = NotificationDetails(
      android: androidPlatformChannelSpecifics,
      iOS: iosPlatformChannelSpecifics,
    );

    await _notificationsPlugin.show(
      id,
      title,
      body,
      platformChannelSpecifics,
      payload: payload,
    );
  }

  // Show progress notification
  static Future<void> showProgressNotification({
    required int id,
    required String title,
    required int progress,
    required int maxProgress,
  }) async {
    final AndroidNotificationDetails androidPlatformChannelSpecifics =
        AndroidNotificationDetails(
      'progress_channel',
      'Progress Channel',
      channelDescription: 'Progress notification channel',
      importance: Importance.low,
      priority: Priority.low,
      onlyAlertOnce: true,
      showProgress: true,
      maxProgress: maxProgress,
      progress: progress,
    );

    const DarwinNotificationDetails iosPlatformChannelSpecifics =
        DarwinNotificationDetails();

    final NotificationDetails platformChannelSpecifics = NotificationDetails(
      android: androidPlatformChannelSpecifics,
      iOS: iosPlatformChannelSpecifics,
    );

    await _notificationsPlugin.show(
      id,
      title,
      progress < maxProgress ? 'Downloading... ${(progress / maxProgress * 100).round()}%' : 'Download complete',
      platformChannelSpecifics,
    );
  }

  // Cancel notification
  static Future<void> cancelNotification(int id) async {
    await _notificationsPlugin.cancel(id);
  }

  // Cancel all notifications
  static Future<void> cancelAllNotifications() async {
    await _notificationsPlugin.cancelAll();
  }

  // Get pending notifications
  static Future<List<PendingNotificationRequest>> getPendingNotifications() async {
    return await _notificationsPlugin.pendingNotificationRequests();
  }
}

// Local notifications example usage
class LocalNotificationsExample extends StatefulWidget {
  @override
  _LocalNotificationsExampleState createState() => _LocalNotificationsExampleState();
}

class _LocalNotificationsExampleState extends State<LocalNotificationsExample> {
  int _notificationId = 0;

  @override
  void initState() {
    super.initState();
    LocalNotificationService.initialize();
  }

  int get nextNotificationId => ++_notificationId;

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text('Local Notifications'),
        backgroundColor: Colors.green,
      ),
      body: Padding(
        padding: EdgeInsets.all(16.0),
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.stretch,
          children: [
            Text(
              'Local Notification Examples',
              style: TextStyle(fontSize: 24, fontWeight: FontWeight.bold),
            ),
            SizedBox(height: 20),
            
            // Immediate notification
            ElevatedButton(
              onPressed: () {
                LocalNotificationService.showNotification(
                  id: nextNotificationId,
                  title: 'Immediate Notification',
                  body: 'This notification appears immediately!',
                  payload: 'immediate_notification',
                );
              },
              child: Text('Show Immediate Notification'),
            ),
            
            SizedBox(height: 10),
            
            // Scheduled notification
            ElevatedButton(
              onPressed: () {
                final scheduledDate = DateTime.now().add(Duration(seconds: 5));
                LocalNotificationService.scheduleNotification(
                  id: nextNotificationId,
                  title: 'Scheduled Notification',
                  body: 'This notification was scheduled 5 seconds ago!',
                  scheduledDate: scheduledDate,
                  payload: 'scheduled_notification',
                );
                
                ScaffoldMessenger.of(context).showSnackBar(
                  SnackBar(
                    content: Text('Notification scheduled for 5 seconds from now'),
                  ),
                );
              },
              child: Text('Schedule Notification (5s)'),
            ),
            
            SizedBox(height: 10),
            
            // Notification with actions
            ElevatedButton(
              onPressed: () {
                LocalNotificationService.showNotificationWithActions(
                  id: nextNotificationId,
                  title: 'New Message',
                  body: 'You have received a new message',
                  payload: 'message_notification',
                );
              },
              child: Text('Show Notification with Actions'),
            ),
            
            SizedBox(height: 10),
            
            // Progress notification
            ElevatedButton(
              onPressed: () {
                _showProgressNotification();
              },
              child: Text('Show Progress Notification'),
            ),
            
            SizedBox(height: 10),
            
            // Request permissions
            ElevatedButton(
              onPressed: () {
                LocalNotificationService.requestPermissions();
              },
              child: Text('Request Permissions'),
            ),
            
            SizedBox(height: 20),
            
            Row(
              children: [
                Expanded(
                  child: ElevatedButton(
                    onPressed: () {
                      LocalNotificationService.cancelNotification(_notificationId);
                    },
                    child: Text('Cancel Last'),
                    style: ElevatedButton.styleFrom(backgroundColor: Colors.orange),
                  ),
                ),
                SizedBox(width: 10),
                Expanded(
                  child: ElevatedButton(
                    onPressed: () {
                      LocalNotificationService.cancelAllNotifications();
                    },
                    child: Text('Cancel All'),
                    style: ElevatedButton.styleFrom(backgroundColor: Colors.red),
                  ),
                ),
              ],
            ),
            
            SizedBox(height: 10),
            
            ElevatedButton(
              onPressed: () async {
                final pending = await LocalNotificationService.getPendingNotifications();
                showDialog(
                  context: context,
                  builder: (context) => AlertDialog(
                    title: Text('Pending Notifications'),
                    content: Text('Count: ${pending.length}'),
                    actions: [
                      TextButton(
                        onPressed: () => Navigator.pop(context),
                        child: Text('OK'),
                      ),
                    ],
                  ),
                );
              },
              child: Text('Show Pending Count'),
            ),
          ],
        ),
      ),
    );
  }

  void _showProgressNotification() {
    final notificationId = nextNotificationId;
    int progress = 0;
    const maxProgress = 100;

    Timer.periodic(Duration(milliseconds: 100), (timer) {
      progress += 2;
      
      LocalNotificationService.showProgressNotification(
        id: notificationId,
        title: 'Downloading File',
        progress: progress,
        maxProgress: maxProgress,
      );

      if (progress >= maxProgress) {
        timer.cancel();
      }
    });
  }
}
```

## Push Notifications Setup

### Firebase Cloud Messaging Implementation

First, add Firebase dependencies to `pubspec.yaml`:

```yaml
dependencies:
  firebase_core: ^2.24.2
  firebase_messaging: ^14.7.10
```

### Push Notifications Service

```dart
import 'package:firebase_core/firebase_core.dart';
import 'package:firebase_messaging/firebase_messaging.dart';

class PushNotificationService {
  static final FirebaseMessaging _firebaseMessaging = FirebaseMessaging.instance;

  static Future<void> initialize() async {
    // Initialize Firebase
    await Firebase.initializeApp();

    // Request permissions
    NotificationSettings settings = await _firebaseMessaging.requestPermission(
      alert: true,
      announcement: false,
      badge: true,
      carPlay: false,
      criticalAlert: false,
      provisional: false,
      sound: true,
    );

    print('User granted permission: ${settings.authorizationStatus}');

    // Get FCM token
    String? token = await _firebaseMessaging.getToken();
    print('FCM Token: $token');

    // Handle background messages
    FirebaseMessaging.onBackgroundMessage(_firebaseMessagingBackgroundHandler);

    // Handle foreground messages
    FirebaseMessaging.onMessage.listen(_handleForegroundMessage);

    // Handle notification taps
    FirebaseMessaging.onMessageOpenedApp.listen(_handleNotificationTap);

    // Handle initial message (when app is terminated)
    RemoteMessage? initialMessage = await _firebaseMessaging.getInitialMessage();
    if (initialMessage != null) {
      _handleNotificationTap(initialMessage);
    }
  }

  static Future<void> _firebaseMessagingBackgroundHandler(RemoteMessage message) async {
    await Firebase.initializeApp();
    print('Handling a background message: ${message.messageId}');
  }

  static void _handleForegroundMessage(RemoteMessage message) {
    print('Got a message whilst in the foreground!');
    print('Message data: ${message.data}');

    if (message.notification != null) {
      print('Message also contained a notification: ${message.notification}');
    }
  }

  static void _handleNotificationTap(RemoteMessage message) {
    print('Message clicked!');
    print('Message data: ${message.data}');
    
    // Navigate to specific screen based on message data
    if (message.data['screen'] != null) {
      // Handle navigation
      print('Navigate to: ${message.data['screen']}');
    }
  }

  static Future<String?> getToken() async {
    return await _firebaseMessaging.getToken();
  }

  static Future<void> subscribeToTopic(String topic) async {
    await _firebaseMessaging.subscribeToTopic(topic);
  }

  static Future<void> unsubscribeFromTopic(String topic) async {
    await _firebaseMessaging.unsubscribeFromTopic(topic);
  }
}
```

## Complete Notification Demo App

### Main Application with All Notification Types

```dart
import 'package:flutter/material.dart';
import 'dart:async';

void main() async {
  WidgetsFlutterBinding.ensureInitialized();
  
  // Initialize notification services
  await LocalNotificationService.initialize();
  await PushNotificationService.initialize();
  
  runApp(NotificationDemoApp());
}

class NotificationDemoApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'Notification Demo',
      theme: ThemeData(
        primarySwatch: Colors.blue,
        visualDensity: VisualDensity.adaptivePlatformDensity,
      ),
      home: NotificationHomePage(),
    );
  }
}

class NotificationHomePage extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text('Notification Examples'),
        backgroundColor: Colors.blue,
      ),
      body: ListView(
        padding: EdgeInsets.all(16),
        children: [
          _buildNavigationCard(
            context,
            'Basic In-App Notifications',
            'Simple banner notifications within the app',
            Icons.notifications,
            () => Navigator.push(context, MaterialPageRoute(
              builder: (context) => BasicNotificationExample(),
            )),
          ),
          _buildNavigationCard(
            context,
            'Advanced In-App Notifications',
            'Custom designs with actions and animations',
            Icons.auto_awesome,
            () => Navigator.push(context, MaterialPageRoute(
              builder: (context) => AdvancedNotificationExample(),
            )),
          ),
          _buildNavigationCard(
            context,
            'Local Notifications',
            'System notifications and scheduling',
            Icons.schedule,
            () => Navigator.push(context, MaterialPageRoute(
              builder: (context) => LocalNotificationsExample(),
            )),
          ),
          _buildNavigationCard(
            context,
            'Notification Settings',
            'Manage notification preferences',
            Icons.settings,
            () => Navigator.push(context, MaterialPageRoute(
              builder: (context) => NotificationSettingsPage(),
            )),
          ),
        ],
      ),
    );
  }

  Widget _buildNavigationCard(
    BuildContext context,
    String title,
    String subtitle,
    IconData icon,
    VoidCallback onTap,
  ) {
    return Card(
      margin: EdgeInsets.only(bottom: 16),
      child: ListTile(
        leading: Container(
          width: 50,
          height: 50,
          decoration: BoxDecoration(
            color: Colors.blue.withOpacity(0.1),
            borderRadius: BorderRadius.circular(25),
          ),
          child: Icon(icon, color: Colors.blue, size: 24),
        ),
        title: Text(title, style: TextStyle(fontWeight: FontWeight.bold)),
        subtitle: Text(subtitle),
        trailing: Icon(Icons.arrow_forward_ios),
        onTap: onTap,
      ),
    );
  }
}

class NotificationSettingsPage extends StatefulWidget {
  @override
  _NotificationSettingsPageState createState() => _NotificationSettingsPageState();
}

class _NotificationSettingsPageState extends State<NotificationSettingsPage> {
  bool _inAppNotifications = true;
  bool _pushNotifications = true;
  bool _soundEnabled = true;
  bool _vibrationEnabled = true;

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text('Notification Settings'),
        backgroundColor: Colors.blue,
      ),
      body: ListView(
        padding: EdgeInsets.all(16),
        children: [
          Text(
            'Notification Preferences',
            style: TextStyle(fontSize: 24, fontWeight: FontWeight.bold),
          ),
          SizedBox(height: 20),
          
          SwitchListTile(
            title: Text('In-App Notifications'),
            subtitle: Text('Show notifications within the app'),
            value: _inAppNotifications,
            onChanged: (value) {
              setState(() {
                _inAppNotifications = value;
              });
            },
          ),
          
          SwitchListTile(
            title: Text('Push Notifications'),
            subtitle: Text('Receive notifications when app is closed'),
            value: _pushNotifications,
            onChanged: (value) {
              setState(() {
                _pushNotifications = value;
              });
            },
          ),
          
          SwitchListTile(
            title: Text('Sound'),
            subtitle: Text('Play sound for notifications'),
            value: _soundEnabled,
            onChanged: (value) {
              setState(() {
                _soundEnabled = value;
              });
            },
          ),
          
          SwitchListTile(
            title: Text('Vibration'),
            subtitle: Text('Vibrate for notifications'),
            value: _vibrationEnabled,
            onChanged: (value) {
              setState(() {
                _vibrationEnabled = value;
              });
            },
          ),
          
          SizedBox(height: 20),
          
          Card(
            child: Padding(
              padding: EdgeInsets.all(16),
              child: Column(
                crossAxisAlignment: CrossAxisAlignment.start,
                children: [
                  Text(
                    'Quick Actions',
                    style: TextStyle(fontSize: 18, fontWeight: FontWeight.bold),
                  ),
                  SizedBox(height: 10),
                  ElevatedButton(
                    onPressed: () async {
                      String? token = await PushNotificationService.getToken();
                      showDialog(
                        context: context,
                        builder: (context) => AlertDialog(
                          title: Text('FCM Token'),
                          content: SelectableText(token ?? 'No token available'),
                          actions: [
                            TextButton(
                              onPressed: () => Navigator.pop(context),
                              child: Text('OK'),
                            ),
                          ],
                        ),
                      );
                    },
                    child: Text('Show FCM Token'),
                  ),
                  SizedBox(height: 10),
                  ElevatedButton(
                    onPressed: () {
                      LocalNotificationService.requestPermissions();
                    },
                    child: Text('Request Permissions'),
                  ),
                ],
              ),
            ),
          ),
        ],
      ),
    );
  }
}
```

## Tips and Best Practices

### 1. **User Experience**
- Don't overwhelm users with too many notifications
- Make notifications actionable and relevant
- Provide clear opt-out mechanisms
- Use appropriate timing for notifications

### 2. **Performance**
- Clean up notification overlays properly
- Avoid memory leaks with proper disposal
- Use efficient animation controllers
- Batch notification updates when possible

### 3. **Accessibility**
- Provide semantic announcements
- Ensure sufficient color contrast
- Support screen readers
- Test with accessibility tools

### 4. **Platform Considerations**
- Follow platform-specific design guidelines
- Handle permissions properly on both platforms
- Test notification behavior across different OS versions
- Consider battery optimization settings

### 5. **Security and Privacy**
- Be transparent about notification usage
- Respect user privacy preferences
- Secure sensitive notification content
- Follow data protection regulations

## Common Use Cases

### 1. **Messaging Apps**
- New message notifications
- Typing indicators
- Read receipts
- Group chat updates

### 2. **E-commerce Apps**
- Order status updates
- Payment confirmations
- Delivery notifications
- Special offers

### 3. **Productivity Apps**
- Task reminders
- Meeting notifications
- Deadline alerts
- Achievement celebrations

### 4. **Social Media Apps**
- Friend requests
- Likes and comments
- New followers
- Trending content

Notifications are crucial for user engagement and app functionality. When implemented thoughtfully with proper permissions, timing, and user controls, they enhance the user experience by providing timely and relevant information without being intrusive or overwhelming.